@model EFood.Modelos.Producto

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <img src="@Model.UbicacionImagen" alt="Imagen del producto" class="img-fluid" /> 
        </div>
        <div class="col-md-6">
            <h2>Producto: @Model.Nombre</h2>
            <p>Contenido: @Model.Contenido</p>

            <div>
                <h4>Precios:</h4>
                <div>
                    <input type="radio" name="precio" value="normal" id="precio_normal" checked />
                    <label for="precio_normal">Normal - @Model.Monto</label>
                </div>
                @if (Model.TipoPrecios != null && Model.TipoPrecios.Any())
                {
                    @foreach (var precio in Model.TipoPrecios)
                    {
                        <div>
                            <input type="radio" name="precio" value="@precio.Id" id="precio_@precio.Id" />
                            <label for="precio_@precio.Id">@precio.Descripcion - @precio.Monto</label>
                        </div>
                    }
                }
            </div>

            <div class="form-group">
                <label for="cantidad">Cantidad:</label>
                <input type="number" id="cantidad" class="form-control" />
            </div>

            <form id="carritoForm" method="get" asp-controller="CarritoCompra" asp-action="Agregar">
                <input type="hidden" id="producto" name="producto" value="@Model" />
                <input type="hidden" id="cantidadInput" name="cantidad" value="1" />
                <input type="hidden" id="precioSeleccionado" name="tipoPrecio" value="normal" />
                <button type="submit" class="btn btn-primary mt-3">Agregar</button>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @* <script>
        function agregarAlCarrito() {
            const precioSeleccionado = document.querySelector('input[name="precio"]:checked');
            const cantidad = document.getElementById('cantidad').value;

            if (!precioSeleccionado) {
                alert("Por favor seleccione un tipo de precio.");
                return;
            }

            if (!cantidad || cantidad <= 0) {
                alert("Por favor ingrese una cantidad válida.");
                return;
            }

            const precioId = precioSeleccionado.value;
            alert(`Producto agregado al carrito con Precio ID: ${precioId} y Cantidad: ${cantidad}`);
            // Aquí puedes hacer una llamada AJAX o redirigir a otra acción para agregar el producto al carrito
        }
    </script> *@

    <script>
        document.getElementById("carritoForm").addEventListener("submit", function (event) {
            var cantidad = document.getElementById("cantidad").value;
            document.getElementById("cantidadInput").value = cantidad;
        });
    </script>

  
    <script>
        document.getElementById("carritoForm").addEventListener("submit", function (event) {
            var cantidad = document.getElementById("cantidad").value;
            var precioSeleccionado = document.querySelector('input[name="precio"]:checked').value;
            document.getElementById("cantidadInput").value = cantidad;
            document.getElementById("precioSeleccionado").value = precioSeleccionado;
        });
    </script>

}
